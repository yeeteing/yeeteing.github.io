"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getUrl = void 0;
const node_url_1 = __importDefault(require("node:url"));
const constants_js_1 = require("./constants.js");
let cachedUrl;
const prodUrl = `https://api.cli.amplify.aws/${constants_js_1.latestApiVersion}/metrics`;
/**
 *  Usage data tracking service URL
 */
const getUrl = () => {
    if (!cachedUrl) {
        cachedUrl = getParsedUrl();
    }
    return cachedUrl;
};
exports.getUrl = getUrl;
const getParsedUrl = () => {
    return node_url_1.default.parse(process.env.AMPLIFY_BACKEND_USAGE_TRACKING_ENDPOINT || prodUrl);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0X3VzYWdlX2RhdGFfdXJsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3VzYWdlLWRhdGEvZ2V0X3VzYWdlX2RhdGFfdXJsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLHdEQUFtRDtBQUNuRCxpREFBa0Q7QUFFbEQsSUFBSSxTQUE2QixDQUFDO0FBRWxDLE1BQU0sT0FBTyxHQUFHLCtCQUErQiwrQkFBZ0IsVUFBVSxDQUFDO0FBRTFFOztHQUVHO0FBQ0ksTUFBTSxNQUFNLEdBQUcsR0FBdUIsRUFBRTtJQUM3QyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDZixTQUFTLEdBQUcsWUFBWSxFQUFFLENBQUM7SUFDN0IsQ0FBQztJQUVELE9BQU8sU0FBUyxDQUFDO0FBQ25CLENBQUMsQ0FBQztBQU5XLFFBQUEsTUFBTSxVQU1qQjtBQUVGLE1BQU0sWUFBWSxHQUFHLEdBQXVCLEVBQUU7SUFDNUMsT0FBTyxrQkFBRyxDQUFDLEtBQUssQ0FDZCxPQUFPLENBQUMsR0FBRyxDQUFDLHVDQUF1QyxJQUFJLE9BQU8sQ0FDL0QsQ0FBQztBQUNKLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB1cmwsIHsgVXJsV2l0aFN0cmluZ1F1ZXJ5IH0gZnJvbSAnbm9kZTp1cmwnO1xuaW1wb3J0IHsgbGF0ZXN0QXBpVmVyc2lvbiB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxubGV0IGNhY2hlZFVybDogVXJsV2l0aFN0cmluZ1F1ZXJ5O1xuXG5jb25zdCBwcm9kVXJsID0gYGh0dHBzOi8vYXBpLmNsaS5hbXBsaWZ5LmF3cy8ke2xhdGVzdEFwaVZlcnNpb259L21ldHJpY3NgO1xuXG4vKipcbiAqICBVc2FnZSBkYXRhIHRyYWNraW5nIHNlcnZpY2UgVVJMXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRVcmwgPSAoKTogVXJsV2l0aFN0cmluZ1F1ZXJ5ID0+IHtcbiAgaWYgKCFjYWNoZWRVcmwpIHtcbiAgICBjYWNoZWRVcmwgPSBnZXRQYXJzZWRVcmwoKTtcbiAgfVxuXG4gIHJldHVybiBjYWNoZWRVcmw7XG59O1xuXG5jb25zdCBnZXRQYXJzZWRVcmwgPSAoKTogVXJsV2l0aFN0cmluZ1F1ZXJ5ID0+IHtcbiAgcmV0dXJuIHVybC5wYXJzZShcbiAgICBwcm9jZXNzLmVudi5BTVBMSUZZX0JBQ0tFTkRfVVNBR0VfVFJBQ0tJTkdfRU5EUE9JTlQgfHwgcHJvZFVybCxcbiAgKTtcbn07XG4iXX0=