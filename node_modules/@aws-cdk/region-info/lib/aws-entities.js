"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AWS_REGIONS = exports.AWS_REGIONS_AND_RULES = exports.RULE_CLASSIC_PARTITION_BECOMES_OPT_IN = exports.RULE_S3_WEBSITE_REGIONAL_SUBDOMAIN = void 0;
exports.partitionInformation = partitionInformation;
/**
 * After this point, S3 website domains look like `s3-website.REGION.s3.amazonaws.com`
 *
 * Before this point, S3 website domains look like `s3-website-REGION.s3.amazonaws.com`.
 */
exports.RULE_S3_WEBSITE_REGIONAL_SUBDOMAIN = Symbol('S3_WEBSITE_REGIONAL_SUBDOMAIN');
/**
 * After this point, all regions in the 'aws' partition are opt-in.
 */
exports.RULE_CLASSIC_PARTITION_BECOMES_OPT_IN = Symbol('CLASSIC_PARTITION_BECOMES_OPT_IN');
/**
 * List of AWS region, ordered by launch date (oldest to newest)
 *
 * The significance of this is that standards and conventions change over time.
 * Generally, as rules are changed they only apply to new regions, and old
 * regions are left as-is.
 *
 * We mix the list of regions with a list of rules that were introduced over
 * time (rules are symbols).
 *
 * Therefore, if we want to know if a rule applies to a certain region, we
 * only need to check its position in the list and compare it to when a
 * rule was introduced.
 */
exports.AWS_REGIONS_AND_RULES = [
    'us-east-1', // US East (N. Virginia)
    'eu-west-1', // Europe (Ireland)
    'us-west-1', // US West (N. California)
    'ap-southeast-1', // Asia Pacific (Singapore)
    'ap-northeast-1', // Asia Pacific (Tokyo)
    'us-gov-west-1', // AWS GovCloud (US-West)
    'us-west-2', // US West (Oregon)
    'sa-east-1', // South America (SÃ£o Paulo)
    'ap-southeast-2', // Asia Pacific (Sydney)
    exports.RULE_S3_WEBSITE_REGIONAL_SUBDOMAIN,
    'cn-north-1', // China (Beijing)
    'us-iso-east-1', // AWS ISO
    'eu-central-1', // Europe (Frankfurt)
    'ap-northeast-2', // Asia Pacific (Seoul)
    'ap-south-1', // Asia Pacific (Mumbai)
    'us-east-2', // US East (Ohio)
    'ca-central-1', // Canada (Central)
    'eu-west-2', // Europe (London)
    'us-isob-east-1', // AWS ISO-B
    'cn-northwest-1', // China (Ningxia)
    'eu-west-3', // Europe (Paris)
    'ap-northeast-3', // Asia Pacific (Osaka)
    'us-gov-east-1', // AWS GovCloud (US-East)
    'eu-north-1', // Europe (Stockholm)
    exports.RULE_CLASSIC_PARTITION_BECOMES_OPT_IN,
    'ap-east-1', // Asia Pacific (Hong Kong)
    'me-south-1', // Middle East (Bahrain)
    'af-south-1', // Africa (Cape Town)
    'eu-south-1', // Europe (Milan)
    'us-iso-west-1', // US ISO West
    'ap-southeast-3', // Asia Pacific (Jakarta)
    'me-central-1', // Middle East (UAE)
    'eu-central-2', // Europe (Zurich)
    'eu-south-2', // Europe (Spain)
    'ap-south-2', // Asia Pacific (Hyderabad)
    'ap-southeast-4', // Asia Pacific (Melbourne)
    'il-central-1', // Israel (Tel Aviv)
    'ca-west-1', // Canada West (Calgary)
    'ap-southeast-5', // Asia Pacific (Malaysia)
    'ap-southeast-7', // Asia Pacific (Thailand)
    'mx-central-1', // Mexico (Central)
    'eu-isoe-west-1', // EU ISO-E West
    'us-isob-west-1', // US ISOB West
    'ap-east-2', // Asia Pacific (Taipei)
    'eusc-de-east-1', // EU (Germany)
    'ap-southeast-6', // Asia Pacific (New Zealand)
];
/**
 * The names of all (known) AWS regions
 *
 * Not in the list ==> no built-in data for that region.
 */
exports.AWS_REGIONS = exports.AWS_REGIONS_AND_RULES
    .filter((x) => typeof x === 'string')
    .sort();
const PARTITION_MAP = {
    'default': { partition: 'aws', domainSuffix: 'amazonaws.com' },
    'cn-': { partition: 'aws-cn', domainSuffix: 'amazonaws.com.cn' },
    'us-gov-': { partition: 'aws-us-gov', domainSuffix: 'amazonaws.com' },
    'us-iso-': { partition: 'aws-iso', domainSuffix: 'c2s.ic.gov' },
    'us-isob-': { partition: 'aws-iso-b', domainSuffix: 'sc2s.sgov.gov' },
    'us-isof-': { partition: 'aws-iso-f', domainSuffix: 'csp.hci.ic.gov' },
    'eu-isoe-': { partition: 'aws-iso-e', domainSuffix: 'cloud.adc-e.uk' },
    'eusc-de-': { partition: 'aws-eusc', domainSuffix: 'amazonaws.eu' },
};
function partitionInformation(region) {
    for (const [prefix, info] of Object.entries(PARTITION_MAP)) {
        if (region.startsWith(prefix)) {
            return info;
        }
    }
    return PARTITION_MAP.default;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXdzLWVudGl0aWVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXdzLWVudGl0aWVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQWlHQSxvREFPQztBQXhHRDs7OztHQUlHO0FBQ1UsUUFBQSxrQ0FBa0MsR0FBRyxNQUFNLENBQUMsK0JBQStCLENBQUMsQ0FBQztBQUUxRjs7R0FFRztBQUNVLFFBQUEscUNBQXFDLEdBQUcsTUFBTSxDQUFDLGtDQUFrQyxDQUFDLENBQUM7QUFFaEc7Ozs7Ozs7Ozs7Ozs7R0FhRztBQUNVLFFBQUEscUJBQXFCLEdBQWlDO0lBQ2pFLFdBQVcsRUFBRSx3QkFBd0I7SUFDckMsV0FBVyxFQUFFLG1CQUFtQjtJQUNoQyxXQUFXLEVBQUUsMEJBQTBCO0lBQ3ZDLGdCQUFnQixFQUFFLDJCQUEyQjtJQUM3QyxnQkFBZ0IsRUFBRSx1QkFBdUI7SUFDekMsZUFBZSxFQUFFLHlCQUF5QjtJQUMxQyxXQUFXLEVBQUUsbUJBQW1CO0lBQ2hDLFdBQVcsRUFBRSw0QkFBNEI7SUFDekMsZ0JBQWdCLEVBQUUsd0JBQXdCO0lBQzFDLDBDQUFrQztJQUNsQyxZQUFZLEVBQUUsa0JBQWtCO0lBQ2hDLGVBQWUsRUFBRSxVQUFVO0lBQzNCLGNBQWMsRUFBRSxxQkFBcUI7SUFDckMsZ0JBQWdCLEVBQUUsdUJBQXVCO0lBQ3pDLFlBQVksRUFBRSx3QkFBd0I7SUFDdEMsV0FBVyxFQUFFLGlCQUFpQjtJQUM5QixjQUFjLEVBQUUsbUJBQW1CO0lBQ25DLFdBQVcsRUFBRSxrQkFBa0I7SUFDL0IsZ0JBQWdCLEVBQUUsWUFBWTtJQUM5QixnQkFBZ0IsRUFBRSxrQkFBa0I7SUFDcEMsV0FBVyxFQUFFLGlCQUFpQjtJQUM5QixnQkFBZ0IsRUFBRSx1QkFBdUI7SUFDekMsZUFBZSxFQUFFLHlCQUF5QjtJQUMxQyxZQUFZLEVBQUUscUJBQXFCO0lBQ25DLDZDQUFxQztJQUNyQyxXQUFXLEVBQUUsMkJBQTJCO0lBQ3hDLFlBQVksRUFBRSx3QkFBd0I7SUFDdEMsWUFBWSxFQUFFLHFCQUFxQjtJQUNuQyxZQUFZLEVBQUUsaUJBQWlCO0lBQy9CLGVBQWUsRUFBRSxjQUFjO0lBQy9CLGdCQUFnQixFQUFFLHlCQUF5QjtJQUMzQyxjQUFjLEVBQUUsb0JBQW9CO0lBQ3BDLGNBQWMsRUFBRSxrQkFBa0I7SUFDbEMsWUFBWSxFQUFFLGlCQUFpQjtJQUMvQixZQUFZLEVBQUUsMkJBQTJCO0lBQ3pDLGdCQUFnQixFQUFFLDJCQUEyQjtJQUM3QyxjQUFjLEVBQUUsb0JBQW9CO0lBQ3BDLFdBQVcsRUFBRSx3QkFBd0I7SUFDckMsZ0JBQWdCLEVBQUUsMEJBQTBCO0lBQzVDLGdCQUFnQixFQUFFLDBCQUEwQjtJQUM1QyxjQUFjLEVBQUUsbUJBQW1CO0lBQ25DLGdCQUFnQixFQUFFLGdCQUFnQjtJQUNsQyxnQkFBZ0IsRUFBRSxlQUFlO0lBQ2pDLFdBQVcsRUFBRSx3QkFBd0I7SUFDckMsZ0JBQWdCLEVBQUUsZUFBZTtJQUNqQyxnQkFBZ0IsRUFBRSw2QkFBNkI7Q0FDaEQsQ0FBQztBQUVGOzs7O0dBSUc7QUFDVSxRQUFBLFdBQVcsR0FBRyw2QkFBcUI7S0FDN0MsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxRQUFRLENBQUM7S0FDcEMsSUFBSSxFQUF1QixDQUFDO0FBSS9CLE1BQU0sYUFBYSxHQUF5QztJQUMxRCxTQUFTLEVBQUUsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUU7SUFDOUQsS0FBSyxFQUFFLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUUsa0JBQWtCLEVBQUU7SUFDaEUsU0FBUyxFQUFFLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsZUFBZSxFQUFFO0lBQ3JFLFNBQVMsRUFBRSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRTtJQUMvRCxVQUFVLEVBQUUsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUU7SUFDckUsVUFBVSxFQUFFLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsZ0JBQWdCLEVBQUU7SUFDdEUsVUFBVSxFQUFFLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsZ0JBQWdCLEVBQUU7SUFDdEUsVUFBVSxFQUFFLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsY0FBYyxFQUFFO0NBQ3BFLENBQUM7QUFFRixTQUFnQixvQkFBb0IsQ0FBQyxNQUFjO0lBQ2pELEtBQUssTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUM7UUFDM0QsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7WUFDOUIsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO0lBQ0gsQ0FBQztJQUNELE9BQU8sYUFBYSxDQUFDLE9BQU8sQ0FBQztBQUMvQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBZnRlciB0aGlzIHBvaW50LCBTMyB3ZWJzaXRlIGRvbWFpbnMgbG9vayBsaWtlIGBzMy13ZWJzaXRlLlJFR0lPTi5zMy5hbWF6b25hd3MuY29tYFxuICpcbiAqIEJlZm9yZSB0aGlzIHBvaW50LCBTMyB3ZWJzaXRlIGRvbWFpbnMgbG9vayBsaWtlIGBzMy13ZWJzaXRlLVJFR0lPTi5zMy5hbWF6b25hd3MuY29tYC5cbiAqL1xuZXhwb3J0IGNvbnN0IFJVTEVfUzNfV0VCU0lURV9SRUdJT05BTF9TVUJET01BSU4gPSBTeW1ib2woJ1MzX1dFQlNJVEVfUkVHSU9OQUxfU1VCRE9NQUlOJyk7XG5cbi8qKlxuICogQWZ0ZXIgdGhpcyBwb2ludCwgYWxsIHJlZ2lvbnMgaW4gdGhlICdhd3MnIHBhcnRpdGlvbiBhcmUgb3B0LWluLlxuICovXG5leHBvcnQgY29uc3QgUlVMRV9DTEFTU0lDX1BBUlRJVElPTl9CRUNPTUVTX09QVF9JTiA9IFN5bWJvbCgnQ0xBU1NJQ19QQVJUSVRJT05fQkVDT01FU19PUFRfSU4nKTtcblxuLyoqXG4gKiBMaXN0IG9mIEFXUyByZWdpb24sIG9yZGVyZWQgYnkgbGF1bmNoIGRhdGUgKG9sZGVzdCB0byBuZXdlc3QpXG4gKlxuICogVGhlIHNpZ25pZmljYW5jZSBvZiB0aGlzIGlzIHRoYXQgc3RhbmRhcmRzIGFuZCBjb252ZW50aW9ucyBjaGFuZ2Ugb3ZlciB0aW1lLlxuICogR2VuZXJhbGx5LCBhcyBydWxlcyBhcmUgY2hhbmdlZCB0aGV5IG9ubHkgYXBwbHkgdG8gbmV3IHJlZ2lvbnMsIGFuZCBvbGRcbiAqIHJlZ2lvbnMgYXJlIGxlZnQgYXMtaXMuXG4gKlxuICogV2UgbWl4IHRoZSBsaXN0IG9mIHJlZ2lvbnMgd2l0aCBhIGxpc3Qgb2YgcnVsZXMgdGhhdCB3ZXJlIGludHJvZHVjZWQgb3ZlclxuICogdGltZSAocnVsZXMgYXJlIHN5bWJvbHMpLlxuICpcbiAqIFRoZXJlZm9yZSwgaWYgd2Ugd2FudCB0byBrbm93IGlmIGEgcnVsZSBhcHBsaWVzIHRvIGEgY2VydGFpbiByZWdpb24sIHdlXG4gKiBvbmx5IG5lZWQgdG8gY2hlY2sgaXRzIHBvc2l0aW9uIGluIHRoZSBsaXN0IGFuZCBjb21wYXJlIGl0IHRvIHdoZW4gYVxuICogcnVsZSB3YXMgaW50cm9kdWNlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IEFXU19SRUdJT05TX0FORF9SVUxFUzogcmVhZG9ubHkgKHN0cmluZyB8IHN5bWJvbClbXSA9IFtcbiAgJ3VzLWVhc3QtMScsIC8vIFVTIEVhc3QgKE4uIFZpcmdpbmlhKVxuICAnZXUtd2VzdC0xJywgLy8gRXVyb3BlIChJcmVsYW5kKVxuICAndXMtd2VzdC0xJywgLy8gVVMgV2VzdCAoTi4gQ2FsaWZvcm5pYSlcbiAgJ2FwLXNvdXRoZWFzdC0xJywgLy8gQXNpYSBQYWNpZmljIChTaW5nYXBvcmUpXG4gICdhcC1ub3J0aGVhc3QtMScsIC8vIEFzaWEgUGFjaWZpYyAoVG9reW8pXG4gICd1cy1nb3Ytd2VzdC0xJywgLy8gQVdTIEdvdkNsb3VkIChVUy1XZXN0KVxuICAndXMtd2VzdC0yJywgLy8gVVMgV2VzdCAoT3JlZ29uKVxuICAnc2EtZWFzdC0xJywgLy8gU291dGggQW1lcmljYSAoU8OjbyBQYXVsbylcbiAgJ2FwLXNvdXRoZWFzdC0yJywgLy8gQXNpYSBQYWNpZmljIChTeWRuZXkpXG4gIFJVTEVfUzNfV0VCU0lURV9SRUdJT05BTF9TVUJET01BSU4sXG4gICdjbi1ub3J0aC0xJywgLy8gQ2hpbmEgKEJlaWppbmcpXG4gICd1cy1pc28tZWFzdC0xJywgLy8gQVdTIElTT1xuICAnZXUtY2VudHJhbC0xJywgLy8gRXVyb3BlIChGcmFua2Z1cnQpXG4gICdhcC1ub3J0aGVhc3QtMicsIC8vIEFzaWEgUGFjaWZpYyAoU2VvdWwpXG4gICdhcC1zb3V0aC0xJywgLy8gQXNpYSBQYWNpZmljIChNdW1iYWkpXG4gICd1cy1lYXN0LTInLCAvLyBVUyBFYXN0IChPaGlvKVxuICAnY2EtY2VudHJhbC0xJywgLy8gQ2FuYWRhIChDZW50cmFsKVxuICAnZXUtd2VzdC0yJywgLy8gRXVyb3BlIChMb25kb24pXG4gICd1cy1pc29iLWVhc3QtMScsIC8vIEFXUyBJU08tQlxuICAnY24tbm9ydGh3ZXN0LTEnLCAvLyBDaGluYSAoTmluZ3hpYSlcbiAgJ2V1LXdlc3QtMycsIC8vIEV1cm9wZSAoUGFyaXMpXG4gICdhcC1ub3J0aGVhc3QtMycsIC8vIEFzaWEgUGFjaWZpYyAoT3Nha2EpXG4gICd1cy1nb3YtZWFzdC0xJywgLy8gQVdTIEdvdkNsb3VkIChVUy1FYXN0KVxuICAnZXUtbm9ydGgtMScsIC8vIEV1cm9wZSAoU3RvY2tob2xtKVxuICBSVUxFX0NMQVNTSUNfUEFSVElUSU9OX0JFQ09NRVNfT1BUX0lOLFxuICAnYXAtZWFzdC0xJywgLy8gQXNpYSBQYWNpZmljIChIb25nIEtvbmcpXG4gICdtZS1zb3V0aC0xJywgLy8gTWlkZGxlIEVhc3QgKEJhaHJhaW4pXG4gICdhZi1zb3V0aC0xJywgLy8gQWZyaWNhIChDYXBlIFRvd24pXG4gICdldS1zb3V0aC0xJywgLy8gRXVyb3BlIChNaWxhbilcbiAgJ3VzLWlzby13ZXN0LTEnLCAvLyBVUyBJU08gV2VzdFxuICAnYXAtc291dGhlYXN0LTMnLCAvLyBBc2lhIFBhY2lmaWMgKEpha2FydGEpXG4gICdtZS1jZW50cmFsLTEnLCAvLyBNaWRkbGUgRWFzdCAoVUFFKVxuICAnZXUtY2VudHJhbC0yJywgLy8gRXVyb3BlIChadXJpY2gpXG4gICdldS1zb3V0aC0yJywgLy8gRXVyb3BlIChTcGFpbilcbiAgJ2FwLXNvdXRoLTInLCAvLyBBc2lhIFBhY2lmaWMgKEh5ZGVyYWJhZClcbiAgJ2FwLXNvdXRoZWFzdC00JywgLy8gQXNpYSBQYWNpZmljIChNZWxib3VybmUpXG4gICdpbC1jZW50cmFsLTEnLCAvLyBJc3JhZWwgKFRlbCBBdml2KVxuICAnY2Etd2VzdC0xJywgLy8gQ2FuYWRhIFdlc3QgKENhbGdhcnkpXG4gICdhcC1zb3V0aGVhc3QtNScsIC8vIEFzaWEgUGFjaWZpYyAoTWFsYXlzaWEpXG4gICdhcC1zb3V0aGVhc3QtNycsIC8vIEFzaWEgUGFjaWZpYyAoVGhhaWxhbmQpXG4gICdteC1jZW50cmFsLTEnLCAvLyBNZXhpY28gKENlbnRyYWwpXG4gICdldS1pc29lLXdlc3QtMScsIC8vIEVVIElTTy1FIFdlc3RcbiAgJ3VzLWlzb2Itd2VzdC0xJywgLy8gVVMgSVNPQiBXZXN0XG4gICdhcC1lYXN0LTInLCAvLyBBc2lhIFBhY2lmaWMgKFRhaXBlaSlcbiAgJ2V1c2MtZGUtZWFzdC0xJywgLy8gRVUgKEdlcm1hbnkpXG4gICdhcC1zb3V0aGVhc3QtNicsIC8vIEFzaWEgUGFjaWZpYyAoTmV3IFplYWxhbmQpXG5dO1xuXG4vKipcbiAqIFRoZSBuYW1lcyBvZiBhbGwgKGtub3duKSBBV1MgcmVnaW9uc1xuICpcbiAqIE5vdCBpbiB0aGUgbGlzdCA9PT4gbm8gYnVpbHQtaW4gZGF0YSBmb3IgdGhhdCByZWdpb24uXG4gKi9cbmV4cG9ydCBjb25zdCBBV1NfUkVHSU9OUyA9IEFXU19SRUdJT05TX0FORF9SVUxFU1xuICAuZmlsdGVyKCh4KSA9PiB0eXBlb2YgeCA9PT0gJ3N0cmluZycpXG4gIC5zb3J0KCkgYXMgcmVhZG9ubHkgc3RyaW5nW107XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVnaW9uIHsgcmVhZG9ubHkgcGFydGl0aW9uOiBzdHJpbmc7IHJlYWRvbmx5IGRvbWFpblN1ZmZpeDogc3RyaW5nIH1cblxuY29uc3QgUEFSVElUSU9OX01BUDoge3JlYWRvbmx5IFtyZWdpb246IHN0cmluZ106IFJlZ2lvbiB9ID0ge1xuICAnZGVmYXVsdCc6IHsgcGFydGl0aW9uOiAnYXdzJywgZG9tYWluU3VmZml4OiAnYW1hem9uYXdzLmNvbScgfSxcbiAgJ2NuLSc6IHsgcGFydGl0aW9uOiAnYXdzLWNuJywgZG9tYWluU3VmZml4OiAnYW1hem9uYXdzLmNvbS5jbicgfSxcbiAgJ3VzLWdvdi0nOiB7IHBhcnRpdGlvbjogJ2F3cy11cy1nb3YnLCBkb21haW5TdWZmaXg6ICdhbWF6b25hd3MuY29tJyB9LFxuICAndXMtaXNvLSc6IHsgcGFydGl0aW9uOiAnYXdzLWlzbycsIGRvbWFpblN1ZmZpeDogJ2Mycy5pYy5nb3YnIH0sXG4gICd1cy1pc29iLSc6IHsgcGFydGl0aW9uOiAnYXdzLWlzby1iJywgZG9tYWluU3VmZml4OiAnc2Mycy5zZ292LmdvdicgfSxcbiAgJ3VzLWlzb2YtJzogeyBwYXJ0aXRpb246ICdhd3MtaXNvLWYnLCBkb21haW5TdWZmaXg6ICdjc3AuaGNpLmljLmdvdicgfSxcbiAgJ2V1LWlzb2UtJzogeyBwYXJ0aXRpb246ICdhd3MtaXNvLWUnLCBkb21haW5TdWZmaXg6ICdjbG91ZC5hZGMtZS51aycgfSxcbiAgJ2V1c2MtZGUtJzogeyBwYXJ0aXRpb246ICdhd3MtZXVzYycsIGRvbWFpblN1ZmZpeDogJ2FtYXpvbmF3cy5ldScgfSxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aXRpb25JbmZvcm1hdGlvbihyZWdpb246IHN0cmluZyk6IFJlZ2lvbiB7XG4gIGZvciAoY29uc3QgW3ByZWZpeCwgaW5mb10gb2YgT2JqZWN0LmVudHJpZXMoUEFSVElUSU9OX01BUCkpIHtcbiAgICBpZiAocmVnaW9uLnN0YXJ0c1dpdGgocHJlZml4KSkge1xuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuICB9XG4gIHJldHVybiBQQVJUSVRJT05fTUFQLmRlZmF1bHQ7XG59XG4iXX0=