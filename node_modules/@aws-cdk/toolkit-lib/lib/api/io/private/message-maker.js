"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.confirm = exports.result = exports.error = exports.warn = exports.info = exports.debug = exports.trace = void 0;
exports.question = question;
/**
 * Produce an IoMessageMaker for the provided level and code info.
 */
function message(level, details) {
    const maker = (text, data) => ({
        time: new Date(),
        level,
        code: details.code,
        message: text,
        data,
    });
    return {
        ...details,
        level,
        msg: maker,
        is: (m) => m.code === details.code,
    };
}
const trace = (details) => message('trace', details);
exports.trace = trace;
const debug = (details) => message('debug', details);
exports.debug = debug;
const info = (details) => message('info', details);
exports.info = info;
const warn = (details) => message('warn', details);
exports.warn = warn;
const error = (details) => message('error', details);
exports.error = error;
const result = (details) => message('result', details);
exports.result = result;
/**
 * Produce an IoRequestMaker for the provided level and request info.
 */
function request(level, details) {
    const maker = (text, data) => ({
        time: new Date(),
        level,
        code: details.code,
        message: text,
        data,
        defaultResponse: details.defaultResponse,
    });
    return {
        ...details,
        level,
        req: maker,
    };
}
/**
 * A request that is a simple yes/no question, with the expectation that 'yes' is the default.
 */
const confirm = (details) => request('info', {
    ...details,
    defaultResponse: true,
});
exports.confirm = confirm;
/**
 * An open ended question with a string answer, typically provided on-demand by a user.
 */
function question(details) {
    const level = 'info';
    const maker = (text, data, defaultResponse) => ({
        time: new Date(),
        level,
        code: details.code,
        message: text,
        data,
        defaultResponse,
    });
    return {
        ...details,
        level,
        req: maker,
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZS1tYWtlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1lc3NhZ2UtbWFrZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBeUpBLDRCQWdCQztBQW5IRDs7R0FFRztBQUNILFNBQVMsT0FBTyxDQUFpQixLQUFxQixFQUFFLE9BQWlCO0lBQ3ZFLE1BQU0sS0FBSyxHQUFHLENBQUMsSUFBWSxFQUFFLElBQU8sRUFBRSxFQUFFLENBQUMsQ0FBQztRQUN4QyxJQUFJLEVBQUUsSUFBSSxJQUFJLEVBQUU7UUFDaEIsS0FBSztRQUNMLElBQUksRUFBRSxPQUFPLENBQUMsSUFBSTtRQUNsQixPQUFPLEVBQUUsSUFBSTtRQUNiLElBQUk7S0FDb0IsQ0FBQSxDQUFDO0lBRTNCLE9BQU87UUFDTCxHQUFHLE9BQU87UUFDVixLQUFLO1FBQ0wsR0FBRyxFQUFFLEtBQVk7UUFDakIsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFxQixFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxPQUFPLENBQUMsSUFBSTtLQUN0RCxDQUFDO0FBQ0osQ0FBQztBQXlCTSxNQUFNLEtBQUssR0FBRyxDQUFpQixPQUFrQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUksT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQTdGLFFBQUEsS0FBSyxTQUF3RjtBQUNuRyxNQUFNLEtBQUssR0FBRyxDQUFpQixPQUFrQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUksT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQTdGLFFBQUEsS0FBSyxTQUF3RjtBQUNuRyxNQUFNLElBQUksR0FBRyxDQUFpQixPQUFrQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUksTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQTNGLFFBQUEsSUFBSSxRQUF1RjtBQUNqRyxNQUFNLElBQUksR0FBRyxDQUFpQixPQUFrQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUksTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQTNGLFFBQUEsSUFBSSxRQUF1RjtBQUNqRyxNQUFNLEtBQUssR0FBRyxDQUFpQixPQUFrQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUksT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQTdGLFFBQUEsS0FBSyxTQUF3RjtBQUNuRyxNQUFNLE1BQU0sR0FBRyxDQUFvQyxPQUEyQixFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUksUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQTNHLFFBQUEsTUFBTSxVQUFxRztBQW9CeEg7O0dBRUc7QUFDSCxTQUFTLE9BQU8sQ0FBcUMsS0FBcUIsRUFBRSxPQUF1QjtJQUNqRyxNQUFNLEtBQUssR0FBRyxDQUFDLElBQVksRUFBRSxJQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDeEMsSUFBSSxFQUFFLElBQUksSUFBSSxFQUFFO1FBQ2hCLEtBQUs7UUFDTCxJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUk7UUFDbEIsT0FBTyxFQUFFLElBQUk7UUFDYixJQUFJO1FBQ0osZUFBZSxFQUFFLE9BQU8sQ0FBQyxlQUFlO0tBQ2IsQ0FBQSxDQUFDO0lBRTlCLE9BQU87UUFDTCxHQUFHLE9BQU87UUFDVixLQUFLO1FBQ0wsR0FBRyxFQUFFLEtBQVk7S0FDbEIsQ0FBQztBQUNKLENBQUM7QUFFRDs7R0FFRztBQUNJLE1BQU0sT0FBTyxHQUFHLENBQW9DLE9BQWdFLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBYSxNQUFNLEVBQUU7SUFDMUosR0FBRyxPQUFPO0lBQ1YsZUFBZSxFQUFFLElBQUk7Q0FDdEIsQ0FBQyxDQUFDO0FBSFUsUUFBQSxPQUFPLFdBR2pCO0FBRUg7O0dBRUc7QUFDSCxTQUFnQixRQUFRLENBQUksT0FBaUI7SUFDM0MsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDO0lBQ3JCLE1BQU0sS0FBSyxHQUFHLENBQUMsSUFBWSxFQUFFLElBQU8sRUFBRSxlQUF1QixFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ2pFLElBQUksRUFBRSxJQUFJLElBQUksRUFBRTtRQUNoQixLQUFLO1FBQ0wsSUFBSSxFQUFFLE9BQU8sQ0FBQyxJQUFJO1FBQ2xCLE9BQU8sRUFBRSxJQUFJO1FBQ2IsSUFBSTtRQUNKLGVBQWU7S0FDaUIsQ0FBQSxDQUFDO0lBRW5DLE9BQU87UUFDTCxHQUFHLE9BQU87UUFDVixLQUFLO1FBQ0wsR0FBRyxFQUFFLEtBQVk7S0FDbEIsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IElvTWVzc2FnZSwgSW9NZXNzYWdlQ29kZSwgSW9NZXNzYWdlTGV2ZWwgfSBmcm9tICcuLi9pby1tZXNzYWdlJztcbmltcG9ydCB0eXBlIHsgQWN0aW9uTGVzc01lc3NhZ2UsIEFjdGlvbkxlc3NSZXF1ZXN0IH0gZnJvbSAnLi9pby1oZWxwZXInO1xuXG4vKipcbiAqIEluZm9ybWF0aW9uIGZvciBlYWNoIElPIE1lc3NhZ2UgQ29kZS5cbiAqL1xuaW50ZXJmYWNlIENvZGVJbmZvIHtcbiAgLyoqXG4gICAqIFRoZSBtZXNzYWdlIGNvZGUuXG4gICAqL1xuICByZWFkb25seSBjb2RlOiBJb01lc3NhZ2VDb2RlO1xuXG4gIC8qKlxuICAgKiBBIGJyaWVmIGRlc2NyaXB0aW9uIG9mIHRoZSBtZWFuaW5nIG9mIHRoaXMgSU8gTWVzc2FnZS5cbiAgICovXG4gIHJlYWRvbmx5IGRlc2NyaXB0aW9uOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBwYXlsb2FkIGludGVyZmFjZSwgaWYgYXBwbGljYWJsZS5cbiAgICogU29tZSBJbyBNZXNzYWdlcyBpbmNsdWRlIGEgcGF5bG9hZCwgd2l0aCBhIHNwZWNpZmljIGludGVyZmFjZS4gVGhlIG5hbWUgb2ZcbiAgICogdGhlIGludGVyZmFjZSBpcyBzcGVjaWZpZWQgaGVyZSBzbyB0aGF0IGl0IGNhbiBiZSBsaW5rZWQgd2l0aCB0aGUgbWVzc2FnZVxuICAgKiB3aGVuIGRvY3VtZW50YXRpb24gaXMgZ2VuZXJhdGVkLlxuICAgKlxuICAgKiBUaGUgaW50ZXJmYWNlIF9tdXN0XyBiZSBleHBvc2VkIGRpcmVjdGx5IGZyb20gdG9vbGtpdC1saWIsIHNvIHRoYXQgaXQgd2lsbFxuICAgKiBoYXZlIGEgZG9jdW1lbnRhdGlvbiBwYWdlIGdlbmVyYXRlZCAodGhhdCBjYW4gYmUgbGlua2VkIHRvKS5cbiAgICovXG4gIHJlYWRvbmx5IGludGVyZmFjZT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBJbmZvcm1hdGlvbiBmb3IgZWFjaCBJTyBNZXNzYWdlXG4gKi9cbmludGVyZmFjZSBNZXNzYWdlSW5mbyBleHRlbmRzIENvZGVJbmZvIHtcbiAgLyoqXG4gICAqIFRoZSBtZXNzYWdlIGxldmVsXG4gICAqL1xuICByZWFkb25seSBsZXZlbDogSW9NZXNzYWdlTGV2ZWw7XG59XG5cbi8qKlxuICogQW4gaW50ZXJmYWNlIHRoYXQgY2FuIHByb2R1Y2UgbWVzc2FnZXMgZm9yIGEgc3BlY2lmaWMgY29kZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJb01lc3NhZ2VNYWtlcjxUPiBleHRlbmRzIE1lc3NhZ2VJbmZvIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG1lc3NhZ2UgZm9yIHRoaXMgY29kZSwgd2l0aCBvciB3aXRob3V0IHBheWxvYWQuXG4gICAqL1xuICBtc2c6IFtUXSBleHRlbmRzIFtBYnNlbnREYXRhXSA/IChtZXNzYWdlOiBzdHJpbmcpID0+IEFjdGlvbkxlc3NNZXNzYWdlPEFic2VudERhdGE+IDogKG1lc3NhZ2U6IHN0cmluZywgZGF0YTogVCkgPT4gQWN0aW9uTGVzc01lc3NhZ2U8VD47XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgZ2l2ZW4gYElvTWVzc2FnZWAgaW5zdGFuY2UgbWF0Y2hlcyB0aGUgY3VycmVudCBtZXNzYWdlIGRlZmluaXRpb25cbiAgICovXG4gIGlzKHg6IElvTWVzc2FnZTx1bmtub3duPik6IHggaXMgSW9NZXNzYWdlPFQ+O1xufVxuXG4vKipcbiAqIFByb2R1Y2UgYW4gSW9NZXNzYWdlTWFrZXIgZm9yIHRoZSBwcm92aWRlZCBsZXZlbCBhbmQgY29kZSBpbmZvLlxuICovXG5mdW5jdGlvbiBtZXNzYWdlPFQgPSBBYnNlbnREYXRhPihsZXZlbDogSW9NZXNzYWdlTGV2ZWwsIGRldGFpbHM6IENvZGVJbmZvKTogSW9NZXNzYWdlTWFrZXI8VD4ge1xuICBjb25zdCBtYWtlciA9ICh0ZXh0OiBzdHJpbmcsIGRhdGE6IFQpID0+ICh7XG4gICAgdGltZTogbmV3IERhdGUoKSxcbiAgICBsZXZlbCxcbiAgICBjb2RlOiBkZXRhaWxzLmNvZGUsXG4gICAgbWVzc2FnZTogdGV4dCxcbiAgICBkYXRhLFxuICB9IGFzIEFjdGlvbkxlc3NNZXNzYWdlPFQ+KTtcblxuICByZXR1cm4ge1xuICAgIC4uLmRldGFpbHMsXG4gICAgbGV2ZWwsXG4gICAgbXNnOiBtYWtlciBhcyBhbnksXG4gICAgaXM6IChtKTogbSBpcyBJb01lc3NhZ2U8VD4gPT4gbS5jb2RlID09PSBkZXRhaWxzLmNvZGUsXG4gIH07XG59XG5cbi8qKlxuICogQSB0eXBlIHRoYXQgaXMgaW1wb3NzaWJsZSBmb3IgYSB1c2VyIHRvIHJlcGxpY2F0ZVxuICogVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IHJlc3VsdHMgYWx3YXlzIGhhdmUgYSBwcm9wZXIgdHlwZSBnZW5lcmljIGRlY2xhcmVkLlxuICovXG5kZWNsYXJlIGNvbnN0IHByaXZhdGVLZXk6IHVuaXF1ZSBzeW1ib2w7XG5leHBvcnQgdHlwZSBJbXBvc3NpYmxlVHlwZSA9IHtcbiAgcmVhZG9ubHkgW3ByaXZhdGVLZXldOiB0eXBlb2YgcHJpdmF0ZUtleTtcbn07XG5cbi8vIENyZWF0ZSBgSW9NZXNzYWdlTWFrZXJgcyBmb3IgYSBnaXZlbiBsZXZlbCBhbmQgdHlwZSBjaGVjayB0aGF0IGNhbGxzIHdpdGggcGF5bG9hZCBhcmUgdXNpbmcgdGhlIGNvcnJlY3QgaW50ZXJmYWNlXG50eXBlIENvZGVJbmZvTWF5YmVJbnRlcmZhY2U8VD4gPSBbVF0gZXh0ZW5kcyBbQWJzZW50RGF0YV0gPyBPbWl0PENvZGVJbmZvLCAnaW50ZXJmYWNlJz4gOiBSZXF1aXJlZDxDb2RlSW5mbz47XG5cbi8qKlxuICogVGhlIHR5cGUgd2UgdXNlIHRvIHJlcHJlc2VudCBhbiBhYnNlbnQgZGF0YSBmaWVsZFxuICpcbiAqIFRoaXMgaXMgaGVyZSB0byBtYWtlIGl0IGVhc3kgdG8gY2hhbmdlIGJldHdlZW4gYHVuZGVmaW5lZGAsIGB2b2lkYFxuICogYW5kIGBuZXZlcmAuXG4gKlxuICogTm90IGEgbG90IG9mIGRpZmZlcmVuY2UgYmV0d2VlbiBgdW5kZWZpbmVkYCBhbmQgYHZvaWRgLCBidXQgYHZvaWRgXG4gKiByZWFkcyBiZXR0ZXIuXG4gKi9cbnR5cGUgQWJzZW50RGF0YSA9IHZvaWQ7XG5cbmV4cG9ydCBjb25zdCB0cmFjZSA9IDxUID0gQWJzZW50RGF0YT4oZGV0YWlsczogQ29kZUluZm9NYXliZUludGVyZmFjZTxUPikgPT4gbWVzc2FnZTxUPigndHJhY2UnLCBkZXRhaWxzKTtcbmV4cG9ydCBjb25zdCBkZWJ1ZyA9IDxUID0gQWJzZW50RGF0YT4oZGV0YWlsczogQ29kZUluZm9NYXliZUludGVyZmFjZTxUPikgPT4gbWVzc2FnZTxUPignZGVidWcnLCBkZXRhaWxzKTtcbmV4cG9ydCBjb25zdCBpbmZvID0gPFQgPSBBYnNlbnREYXRhPihkZXRhaWxzOiBDb2RlSW5mb01heWJlSW50ZXJmYWNlPFQ+KSA9PiBtZXNzYWdlPFQ+KCdpbmZvJywgZGV0YWlscyk7XG5leHBvcnQgY29uc3Qgd2FybiA9IDxUID0gQWJzZW50RGF0YT4oZGV0YWlsczogQ29kZUluZm9NYXliZUludGVyZmFjZTxUPikgPT4gbWVzc2FnZTxUPignd2FybicsIGRldGFpbHMpO1xuZXhwb3J0IGNvbnN0IGVycm9yID0gPFQgPSBBYnNlbnREYXRhPihkZXRhaWxzOiBDb2RlSW5mb01heWJlSW50ZXJmYWNlPFQ+KSA9PiBtZXNzYWdlPFQ+KCdlcnJvcicsIGRldGFpbHMpO1xuZXhwb3J0IGNvbnN0IHJlc3VsdCA9IDxUIGV4dGVuZHMgb2JqZWN0ID0gSW1wb3NzaWJsZVR5cGU+KGRldGFpbHM6IFJlcXVpcmVkPENvZGVJbmZvPikgPT4gbWVzc2FnZTxUPigncmVzdWx0JywgZGV0YWlscyk7XG5cbmludGVyZmFjZSBSZXF1ZXN0SW5mbzxVPiBleHRlbmRzIENvZGVJbmZvIHtcbiAgcmVhZG9ubHkgZGVmYXVsdFJlc3BvbnNlOiBVO1xufVxuXG4vKipcbiAqIEFuIGludGVyZmFjZSB0aGF0IGNhbiBwcm9kdWNlIHJlcXVlc3RzIGZvciBhIHNwZWNpZmljIGNvZGUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSW9SZXF1ZXN0TWFrZXI8VCwgVT4gZXh0ZW5kcyBNZXNzYWdlSW5mbyB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBtZXNzYWdlIGZvciB0aGlzIGNvZGUsIHdpdGggb3Igd2l0aG91dCBwYXlsb2FkLlxuICAgKi9cbiAgcmVxOiBbVF0gZXh0ZW5kcyBbQWJzZW50RGF0YV1cbiAgICA/IChtZXNzYWdlOiBzdHJpbmcpID0+IEFjdGlvbkxlc3NNZXNzYWdlPEFic2VudERhdGE+XG4gICAgOiBbVV0gZXh0ZW5kcyBbYm9vbGVhbl1cbiAgICAgID8gKG1lc3NhZ2U6IHN0cmluZywgZGF0YTogVCkgPT4gQWN0aW9uTGVzc1JlcXVlc3Q8VCwgVT5cbiAgICAgIDogKG1lc3NhZ2U6IHN0cmluZywgZGF0YTogVCwgZGVmYXVsdFJlc3BvbnNlOiBVKSA9PiBBY3Rpb25MZXNzUmVxdWVzdDxULCBVPjtcbn1cblxuLyoqXG4gKiBQcm9kdWNlIGFuIElvUmVxdWVzdE1ha2VyIGZvciB0aGUgcHJvdmlkZWQgbGV2ZWwgYW5kIHJlcXVlc3QgaW5mby5cbiAqL1xuZnVuY3Rpb24gcmVxdWVzdDxUID0gQWJzZW50RGF0YSwgVSA9IEltcG9zc2libGVUeXBlPihsZXZlbDogSW9NZXNzYWdlTGV2ZWwsIGRldGFpbHM6IFJlcXVlc3RJbmZvPFU+KTogSW9SZXF1ZXN0TWFrZXI8VCwgVT4ge1xuICBjb25zdCBtYWtlciA9ICh0ZXh0OiBzdHJpbmcsIGRhdGE6IFQpID0+ICh7XG4gICAgdGltZTogbmV3IERhdGUoKSxcbiAgICBsZXZlbCxcbiAgICBjb2RlOiBkZXRhaWxzLmNvZGUsXG4gICAgbWVzc2FnZTogdGV4dCxcbiAgICBkYXRhLFxuICAgIGRlZmF1bHRSZXNwb25zZTogZGV0YWlscy5kZWZhdWx0UmVzcG9uc2UsXG4gIH0gYXMgQWN0aW9uTGVzc1JlcXVlc3Q8VCwgVT4pO1xuXG4gIHJldHVybiB7XG4gICAgLi4uZGV0YWlscyxcbiAgICBsZXZlbCxcbiAgICByZXE6IG1ha2VyIGFzIGFueSxcbiAgfTtcbn1cblxuLyoqXG4gKiBBIHJlcXVlc3QgdGhhdCBpcyBhIHNpbXBsZSB5ZXMvbm8gcXVlc3Rpb24sIHdpdGggdGhlIGV4cGVjdGF0aW9uIHRoYXQgJ3llcycgaXMgdGhlIGRlZmF1bHQuXG4gKi9cbmV4cG9ydCBjb25zdCBjb25maXJtID0gPFQgZXh0ZW5kcyBvYmplY3QgPSBJbXBvc3NpYmxlVHlwZT4oZGV0YWlsczogUmVxdWlyZWQ8T21pdDxSZXF1ZXN0SW5mbzxib29sZWFuPiwgJ2RlZmF1bHRSZXNwb25zZSc+PikgPT4gcmVxdWVzdDxULCBib29sZWFuPignaW5mbycsIHtcbiAgLi4uZGV0YWlscyxcbiAgZGVmYXVsdFJlc3BvbnNlOiB0cnVlLFxufSk7XG5cbi8qKlxuICogQW4gb3BlbiBlbmRlZCBxdWVzdGlvbiB3aXRoIGEgc3RyaW5nIGFuc3dlciwgdHlwaWNhbGx5IHByb3ZpZGVkIG9uLWRlbWFuZCBieSBhIHVzZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWVzdGlvbjxUPihkZXRhaWxzOiBDb2RlSW5mbyk6IElvUmVxdWVzdE1ha2VyPFQsIHN0cmluZz4ge1xuICBjb25zdCBsZXZlbCA9ICdpbmZvJztcbiAgY29uc3QgbWFrZXIgPSAodGV4dDogc3RyaW5nLCBkYXRhOiBULCBkZWZhdWx0UmVzcG9uc2U6IHN0cmluZykgPT4gKHtcbiAgICB0aW1lOiBuZXcgRGF0ZSgpLFxuICAgIGxldmVsLFxuICAgIGNvZGU6IGRldGFpbHMuY29kZSxcbiAgICBtZXNzYWdlOiB0ZXh0LFxuICAgIGRhdGEsXG4gICAgZGVmYXVsdFJlc3BvbnNlLFxuICB9IGFzIEFjdGlvbkxlc3NSZXF1ZXN0PFQsIHN0cmluZz4pO1xuXG4gIHJldHVybiB7XG4gICAgLi4uZGV0YWlscyxcbiAgICBsZXZlbCxcbiAgICByZXE6IG1ha2VyIGFzIGFueSxcbiAgfTtcbn1cbiJdfQ==