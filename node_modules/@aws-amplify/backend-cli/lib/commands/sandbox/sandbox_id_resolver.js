import { userInfo as _userInfo } from 'os';
/**
 * Resolves an ID that can be used to uniquely identify sandbox environments
 */
export class SandboxBackendIdResolver {
    namespaceResolver;
    userInfo;
    /**
     * Initialize with an appName resolver
     */
    constructor(namespaceResolver, userInfo = _userInfo) {
        this.namespaceResolver = namespaceResolver;
        this.userInfo = userInfo;
    }
    /**
     * Returns a concatenation of the resolved appName and the current username
     */
    resolve = async (identifier) => {
        const namespace = await this.namespaceResolver.resolve();
        const name = identifier || this.userInfo().username;
        return {
            namespace,
            name,
            type: 'sandbox',
        };
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2FuZGJveF9pZF9yZXNvbHZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tYW5kcy9zYW5kYm94L3NhbmRib3hfaWRfcmVzb2x2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFFBQVEsSUFBSSxTQUFTLEVBQUUsTUFBTSxJQUFJLENBQUM7QUFJM0M7O0dBRUc7QUFDSCxNQUFNLE9BQU8sd0JBQXdCO0lBS2hCO0lBQ0E7SUFMbkI7O09BRUc7SUFDSCxZQUNtQixpQkFBb0MsRUFDcEMsV0FBVyxTQUFTO1FBRHBCLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUFDcEMsYUFBUSxHQUFSLFFBQVEsQ0FBWTtJQUNwQyxDQUFDO0lBRUo7O09BRUc7SUFDSCxPQUFPLEdBQUcsS0FBSyxFQUFFLFVBQW1CLEVBQThCLEVBQUU7UUFDbEUsTUFBTSxTQUFTLEdBQUcsTUFBTSxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDekQsTUFBTSxJQUFJLEdBQUcsVUFBVSxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUM7UUFFcEQsT0FBTztZQUNMLFNBQVM7WUFDVCxJQUFJO1lBQ0osSUFBSSxFQUFFLFNBQVM7U0FDaEIsQ0FBQztJQUNKLENBQUMsQ0FBQztDQUNIIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlckluZm8gYXMgX3VzZXJJbmZvIH0gZnJvbSAnb3MnO1xuaW1wb3J0IHsgTmFtZXNwYWNlUmVzb2x2ZXIgfSBmcm9tICcuLi8uLi9iYWNrZW5kLWlkZW50aWZpZXIvbG9jYWxfbmFtZXNwYWNlX3Jlc29sdmVyLmpzJztcbmltcG9ydCB7IEJhY2tlbmRJZGVudGlmaWVyIH0gZnJvbSAnQGF3cy1hbXBsaWZ5L3BsdWdpbi10eXBlcyc7XG5cbi8qKlxuICogUmVzb2x2ZXMgYW4gSUQgdGhhdCBjYW4gYmUgdXNlZCB0byB1bmlxdWVseSBpZGVudGlmeSBzYW5kYm94IGVudmlyb25tZW50c1xuICovXG5leHBvcnQgY2xhc3MgU2FuZGJveEJhY2tlbmRJZFJlc29sdmVyIHtcbiAgLyoqXG4gICAqIEluaXRpYWxpemUgd2l0aCBhbiBhcHBOYW1lIHJlc29sdmVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IG5hbWVzcGFjZVJlc29sdmVyOiBOYW1lc3BhY2VSZXNvbHZlcixcbiAgICBwcml2YXRlIHJlYWRvbmx5IHVzZXJJbmZvID0gX3VzZXJJbmZvLFxuICApIHt9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBjb25jYXRlbmF0aW9uIG9mIHRoZSByZXNvbHZlZCBhcHBOYW1lIGFuZCB0aGUgY3VycmVudCB1c2VybmFtZVxuICAgKi9cbiAgcmVzb2x2ZSA9IGFzeW5jIChpZGVudGlmaWVyPzogc3RyaW5nKTogUHJvbWlzZTxCYWNrZW5kSWRlbnRpZmllcj4gPT4ge1xuICAgIGNvbnN0IG5hbWVzcGFjZSA9IGF3YWl0IHRoaXMubmFtZXNwYWNlUmVzb2x2ZXIucmVzb2x2ZSgpO1xuICAgIGNvbnN0IG5hbWUgPSBpZGVudGlmaWVyIHx8IHRoaXMudXNlckluZm8oKS51c2VybmFtZTtcblxuICAgIHJldHVybiB7XG4gICAgICBuYW1lc3BhY2UsXG4gICAgICBuYW1lLFxuICAgICAgdHlwZTogJ3NhbmRib3gnLFxuICAgIH07XG4gIH07XG59XG4iXX0=