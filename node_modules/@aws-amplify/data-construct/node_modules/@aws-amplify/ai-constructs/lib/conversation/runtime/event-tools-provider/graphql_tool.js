"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.GraphQlTool = void 0;
const graphql_request_executor_1 = require("../graphql_request_executor");
/**
 * A tool that use GraphQl queries.
 */
class GraphQlTool {
    /**
     * Creates GraphQl Tool
     */
    constructor(name, description, inputSchema, graphQlEndpoint, query, accessToken, userAgentProvider, graphqlRequestExecutor = new graphql_request_executor_1.GraphqlRequestExecutor(graphQlEndpoint, accessToken, userAgentProvider)) {
        this.name = name;
        this.description = description;
        this.inputSchema = inputSchema;
        this.graphQlEndpoint = graphQlEndpoint;
        this.query = query;
        this.accessToken = accessToken;
        this.userAgentProvider = userAgentProvider;
        this.graphqlRequestExecutor = graphqlRequestExecutor;
        this.execute = async (input) => {
            if (!input) {
                throw Error(`GraphQl tool '${this.name}' requires input to execute.`);
            }
            const response = await this.graphqlRequestExecutor.executeGraphql({
                query: this.query,
                variables: input,
            });
            return { json: response };
        };
    }
}
exports.GraphQlTool = GraphQlTool;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGhxbF90b29sLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbnZlcnNhdGlvbi9ydW50aW1lL2V2ZW50LXRvb2xzLXByb3ZpZGVyL2dyYXBocWxfdG9vbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFHQSwwRUFBcUU7QUFHckU7O0dBRUc7QUFDSCxNQUFhLFdBQVc7SUFDdEI7O09BRUc7SUFDSCxZQUNTLElBQVksRUFDWixXQUFtQixFQUNuQixXQUF3QyxFQUN0QyxlQUF1QixFQUNmLEtBQWEsRUFDckIsV0FBbUIsRUFDbkIsaUJBQW9DLEVBQzVCLHlCQUF5QixJQUFJLGlEQUFzQixDQUNsRSxlQUFlLEVBQ2YsV0FBVyxFQUNYLGlCQUFpQixDQUNsQjtRQVhNLFNBQUksR0FBSixJQUFJLENBQVE7UUFDWixnQkFBVyxHQUFYLFdBQVcsQ0FBUTtRQUNuQixnQkFBVyxHQUFYLFdBQVcsQ0FBNkI7UUFDdEMsb0JBQWUsR0FBZixlQUFlLENBQVE7UUFDZixVQUFLLEdBQUwsS0FBSyxDQUFRO1FBQ3JCLGdCQUFXLEdBQVgsV0FBVyxDQUFRO1FBQ25CLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUFDNUIsMkJBQXNCLEdBQXRCLHNCQUFzQixDQUl0QztRQUdILFlBQU8sR0FBRyxLQUFLLEVBQ2IsS0FBMEIsRUFDTyxFQUFFO1lBQ25DLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDWCxNQUFNLEtBQUssQ0FBQyxpQkFBaUIsSUFBSSxDQUFDLElBQUksOEJBQThCLENBQUMsQ0FBQztZQUN4RSxDQUFDO1lBRUQsTUFBTSxRQUFRLEdBQUcsTUFBTSxJQUFJLENBQUMsc0JBQXNCLENBQUMsY0FBYyxDQUcvRDtnQkFDQSxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7Z0JBQ2pCLFNBQVMsRUFBRSxLQUFLO2FBQ2pCLENBQUMsQ0FBQztZQUNILE9BQU8sRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUM7UUFDNUIsQ0FBQyxDQUFDO0lBakJDLENBQUM7Q0FrQkw7QUFuQ0Qsa0NBbUNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXhlY3V0YWJsZVRvb2wsIEpTT05TY2hlbWEsIFRvb2xJbnB1dFNjaGVtYSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB0eXBlIHsgVG9vbFJlc3VsdENvbnRlbnRCbG9jayB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1iZWRyb2NrLXJ1bnRpbWUnO1xuaW1wb3J0IHsgRG9jdW1lbnRUeXBlIH0gZnJvbSAnQHNtaXRoeS90eXBlcyc7XG5pbXBvcnQgeyBHcmFwaHFsUmVxdWVzdEV4ZWN1dG9yIH0gZnJvbSAnLi4vZ3JhcGhxbF9yZXF1ZXN0X2V4ZWN1dG9yJztcbmltcG9ydCB7IFVzZXJBZ2VudFByb3ZpZGVyIH0gZnJvbSAnLi4vdXNlcl9hZ2VudF9wcm92aWRlcic7XG5cbi8qKlxuICogQSB0b29sIHRoYXQgdXNlIEdyYXBoUWwgcXVlcmllcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEdyYXBoUWxUb29sIGltcGxlbWVudHMgRXhlY3V0YWJsZVRvb2w8SlNPTlNjaGVtYSwgdW5rbm93bj4ge1xuICAvKipcbiAgICogQ3JlYXRlcyBHcmFwaFFsIFRvb2xcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcsXG4gICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcsXG4gICAgcHVibGljIGlucHV0U2NoZW1hOiBUb29sSW5wdXRTY2hlbWE8SlNPTlNjaGVtYT4sXG4gICAgcmVhZG9ubHkgZ3JhcGhRbEVuZHBvaW50OiBzdHJpbmcsXG4gICAgcHJpdmF0ZSByZWFkb25seSBxdWVyeTogc3RyaW5nLFxuICAgIHJlYWRvbmx5IGFjY2Vzc1Rva2VuOiBzdHJpbmcsXG4gICAgcmVhZG9ubHkgdXNlckFnZW50UHJvdmlkZXI6IFVzZXJBZ2VudFByb3ZpZGVyLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZ3JhcGhxbFJlcXVlc3RFeGVjdXRvciA9IG5ldyBHcmFwaHFsUmVxdWVzdEV4ZWN1dG9yKFxuICAgICAgZ3JhcGhRbEVuZHBvaW50LFxuICAgICAgYWNjZXNzVG9rZW4sXG4gICAgICB1c2VyQWdlbnRQcm92aWRlcixcbiAgICApLFxuICApIHt9XG5cbiAgZXhlY3V0ZSA9IGFzeW5jIChcbiAgICBpbnB1dDogdW5rbm93biB8IHVuZGVmaW5lZCxcbiAgKTogUHJvbWlzZTxUb29sUmVzdWx0Q29udGVudEJsb2NrPiA9PiB7XG4gICAgaWYgKCFpbnB1dCkge1xuICAgICAgdGhyb3cgRXJyb3IoYEdyYXBoUWwgdG9vbCAnJHt0aGlzLm5hbWV9JyByZXF1aXJlcyBpbnB1dCB0byBleGVjdXRlLmApO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5ncmFwaHFsUmVxdWVzdEV4ZWN1dG9yLmV4ZWN1dGVHcmFwaHFsPFxuICAgICAgdW5rbm93bixcbiAgICAgIERvY3VtZW50VHlwZVxuICAgID4oe1xuICAgICAgcXVlcnk6IHRoaXMucXVlcnksXG4gICAgICB2YXJpYWJsZXM6IGlucHV0LFxuICAgIH0pO1xuICAgIHJldHVybiB7IGpzb246IHJlc3BvbnNlIH07XG4gIH07XG59XG4iXX0=