"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RegionFetcher = void 0;
const client_sts_1 = require("@aws-sdk/client-sts");
/**
 * Retrieves AWS region of the user
 */
class RegionFetcher {
    stsClient;
    regionPromise;
    /**
     * constructor for RegionFetcher
     */
    constructor(stsClient = new client_sts_1.STSClient()) {
        this.stsClient = stsClient;
    }
    fetch = async () => {
        if (this.regionPromise) {
            return await this.regionPromise;
        }
        try {
            this.regionPromise = this.stsClient.config.region();
            return await this.regionPromise;
        }
        catch {
            return;
        }
    };
}
exports.RegionFetcher = RegionFetcher;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaW9uX2ZldGNoZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdGVsZW1ldHJ5L3JlZ2lvbl9mZXRjaGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLG9EQUFnRDtBQUVoRDs7R0FFRztBQUNILE1BQWEsYUFBYTtJQU1LO0lBTHJCLGFBQWEsQ0FBbUI7SUFFeEM7O09BRUc7SUFDSCxZQUE2QixZQUFZLElBQUksc0JBQVMsRUFBRTtRQUEzQixjQUFTLEdBQVQsU0FBUyxDQUFrQjtJQUFHLENBQUM7SUFDNUQsS0FBSyxHQUFHLEtBQUssSUFBSSxFQUFFO1FBQ2pCLElBQUksSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ3ZCLE9BQU8sTUFBTSxJQUFJLENBQUMsYUFBYSxDQUFDO1FBQ2xDLENBQUM7UUFDRCxJQUFJLENBQUM7WUFDSCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ3BELE9BQU8sTUFBTSxJQUFJLENBQUMsYUFBYSxDQUFDO1FBQ2xDLENBQUM7UUFBQyxNQUFNLENBQUM7WUFDUCxPQUFPO1FBQ1QsQ0FBQztJQUNILENBQUMsQ0FBQztDQUNIO0FBbEJELHNDQWtCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNUU0NsaWVudCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1zdHMnO1xuXG4vKipcbiAqIFJldHJpZXZlcyBBV1MgcmVnaW9uIG9mIHRoZSB1c2VyXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWdpb25GZXRjaGVyIHtcbiAgcHJpdmF0ZSByZWdpb25Qcm9taXNlPzogUHJvbWlzZTxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBjb25zdHJ1Y3RvciBmb3IgUmVnaW9uRmV0Y2hlclxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBzdHNDbGllbnQgPSBuZXcgU1RTQ2xpZW50KCkpIHt9XG4gIGZldGNoID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICh0aGlzLnJlZ2lvblByb21pc2UpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJlZ2lvblByb21pc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB0aGlzLnJlZ2lvblByb21pc2UgPSB0aGlzLnN0c0NsaWVudC5jb25maWcucmVnaW9uKCk7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5yZWdpb25Qcm9taXNlO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfTtcbn1cbiJdfQ==