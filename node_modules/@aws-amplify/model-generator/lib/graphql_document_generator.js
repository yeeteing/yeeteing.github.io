import { generateStatements } from '@aws-amplify/graphql-generator';
/**
 * Generates GraphQL documents for a given AppSync API
 */
export class AppSyncGraphqlDocumentGenerator {
    fetchSchema;
    resultBuilder;
    /**
     * Configures the AppSyncGraphqlDocumentGenerator
     */
    constructor(fetchSchema, resultBuilder) {
        this.fetchSchema = fetchSchema;
        this.resultBuilder = resultBuilder;
    }
    generateModels = async ({ targetFormat, maxDepth, typenameIntrospection, relativeTypesPath, }) => {
        const schema = await this.fetchSchema();
        if (!schema) {
            // eslint-disable-next-line @aws-amplify/amplify-backend-rules/prefer-amplify-errors
            throw new Error('Invalid schema');
        }
        const generatedStatements = generateStatements({
            schema,
            target: targetFormat,
            maxDepth,
            typenameIntrospection,
            relativeTypesPath,
        });
        return this.resultBuilder(generatedStatements);
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGhxbF9kb2N1bWVudF9nZW5lcmF0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZ3JhcGhxbF9kb2N1bWVudF9nZW5lcmF0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFPcEU7O0dBRUc7QUFDSCxNQUFNLE9BQU8sK0JBQStCO0lBT2hDO0lBQ0E7SUFMVjs7T0FFRztJQUNILFlBQ1UsV0FBa0MsRUFDbEMsYUFFYTtRQUhiLGdCQUFXLEdBQVgsV0FBVyxDQUF1QjtRQUNsQyxrQkFBYSxHQUFiLGFBQWEsQ0FFQTtJQUNwQixDQUFDO0lBQ0osY0FBYyxHQUFHLEtBQUssRUFBRSxFQUN0QixZQUFZLEVBQ1osUUFBUSxFQUNSLHFCQUFxQixFQUNyQixpQkFBaUIsR0FDWSxFQUFFLEVBQUU7UUFDakMsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFFeEMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ1osb0ZBQW9GO1lBQ3BGLE1BQU0sSUFBSSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUNwQyxDQUFDO1FBRUQsTUFBTSxtQkFBbUIsR0FBRyxrQkFBa0IsQ0FBQztZQUM3QyxNQUFNO1lBQ04sTUFBTSxFQUFFLFlBQVk7WUFDcEIsUUFBUTtZQUNSLHFCQUFxQjtZQUNyQixpQkFBaUI7U0FDbEIsQ0FBQyxDQUFDO1FBRUgsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDakQsQ0FBQyxDQUFDO0NBQ0giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmF0ZVN0YXRlbWVudHMgfSBmcm9tICdAYXdzLWFtcGxpZnkvZ3JhcGhxbC1nZW5lcmF0b3InO1xuaW1wb3J0IHtcbiAgRG9jdW1lbnRHZW5lcmF0aW9uUGFyYW1ldGVycyxcbiAgR2VuZXJhdGlvblJlc3VsdCxcbiAgR3JhcGhxbERvY3VtZW50R2VuZXJhdG9yLFxufSBmcm9tICcuL21vZGVsX2dlbmVyYXRvci5qcyc7XG5cbi8qKlxuICogR2VuZXJhdGVzIEdyYXBoUUwgZG9jdW1lbnRzIGZvciBhIGdpdmVuIEFwcFN5bmMgQVBJXG4gKi9cbmV4cG9ydCBjbGFzcyBBcHBTeW5jR3JhcGhxbERvY3VtZW50R2VuZXJhdG9yXG4gIGltcGxlbWVudHMgR3JhcGhxbERvY3VtZW50R2VuZXJhdG9yXG57XG4gIC8qKlxuICAgKiBDb25maWd1cmVzIHRoZSBBcHBTeW5jR3JhcGhxbERvY3VtZW50R2VuZXJhdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGZldGNoU2NoZW1hOiAoKSA9PiBQcm9taXNlPHN0cmluZz4sXG4gICAgcHJpdmF0ZSByZXN1bHRCdWlsZGVyOiAoXG4gICAgICBmaWxlTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LFxuICAgICkgPT4gR2VuZXJhdGlvblJlc3VsdCxcbiAgKSB7fVxuICBnZW5lcmF0ZU1vZGVscyA9IGFzeW5jICh7XG4gICAgdGFyZ2V0Rm9ybWF0LFxuICAgIG1heERlcHRoLFxuICAgIHR5cGVuYW1lSW50cm9zcGVjdGlvbixcbiAgICByZWxhdGl2ZVR5cGVzUGF0aCxcbiAgfTogRG9jdW1lbnRHZW5lcmF0aW9uUGFyYW1ldGVycykgPT4ge1xuICAgIGNvbnN0IHNjaGVtYSA9IGF3YWl0IHRoaXMuZmV0Y2hTY2hlbWEoKTtcblxuICAgIGlmICghc2NoZW1hKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQGF3cy1hbXBsaWZ5L2FtcGxpZnktYmFja2VuZC1ydWxlcy9wcmVmZXItYW1wbGlmeS1lcnJvcnNcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzY2hlbWEnKTtcbiAgICB9XG5cbiAgICBjb25zdCBnZW5lcmF0ZWRTdGF0ZW1lbnRzID0gZ2VuZXJhdGVTdGF0ZW1lbnRzKHtcbiAgICAgIHNjaGVtYSxcbiAgICAgIHRhcmdldDogdGFyZ2V0Rm9ybWF0LFxuICAgICAgbWF4RGVwdGgsXG4gICAgICB0eXBlbmFtZUludHJvc3BlY3Rpb24sXG4gICAgICByZWxhdGl2ZVR5cGVzUGF0aCxcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLnJlc3VsdEJ1aWxkZXIoZ2VuZXJhdGVkU3RhdGVtZW50cyk7XG4gIH07XG59XG4iXX0=