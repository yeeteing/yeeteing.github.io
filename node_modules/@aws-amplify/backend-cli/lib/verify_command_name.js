import * as path from 'path';
import { format } from '@aws-amplify/cli-core';
import { AmplifyUserError } from '@aws-amplify/platform-core';
import { EOL } from 'os';
const expectedCommandName = 'ampx';
/**
 * Verify that the command name is `ampx`.
 * In the next MV, we should remove the "amplify" bin entry entirely and then this validation will no longer be needed
 */
export const verifyCommandName = () => {
    const commandName = path.parse(process.argv[1]).name;
    if (commandName === expectedCommandName) {
        return;
    }
    let command = process.argv.slice(2).join(' ');
    if (command.length === 0) {
        command = '<command>';
    }
    throw new AmplifyUserError('InvalidCommandError', {
        message: `The Amplify Gen 2 CLI has been renamed to ${format.command(expectedCommandName)}`,
        resolution: `Rerun using the ${format.command(expectedCommandName)} command name:${EOL}${EOL}${format.normalizeAmpxCommand(command)}${EOL}`,
    });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVyaWZ5X2NvbW1hbmRfbmFtZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy92ZXJpZnlfY29tbWFuZF9uYW1lLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sS0FBSyxJQUFJLE1BQU0sTUFBTSxDQUFDO0FBQzdCLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sSUFBSSxDQUFDO0FBRXpCLE1BQU0sbUJBQW1CLEdBQUcsTUFBTSxDQUFDO0FBRW5DOzs7R0FHRztBQUNILE1BQU0sQ0FBQyxNQUFNLGlCQUFpQixHQUFHLEdBQUcsRUFBRTtJQUNwQyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDckQsSUFBSSxXQUFXLEtBQUssbUJBQW1CLEVBQUUsQ0FBQztRQUN4QyxPQUFPO0lBQ1QsQ0FBQztJQUNELElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUM5QyxJQUFJLE9BQU8sQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDekIsT0FBTyxHQUFHLFdBQVcsQ0FBQztJQUN4QixDQUFDO0lBQ0QsTUFBTSxJQUFJLGdCQUFnQixDQUFDLHFCQUFxQixFQUFFO1FBQ2hELE9BQU8sRUFBRSw2Q0FBNkMsTUFBTSxDQUFDLE9BQU8sQ0FDbEUsbUJBQW1CLENBQ3BCLEVBQUU7UUFDSCxVQUFVLEVBQUUsbUJBQW1CLE1BQU0sQ0FBQyxPQUFPLENBQzNDLG1CQUFtQixDQUNwQixpQkFBaUIsR0FBRyxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUMsb0JBQW9CLENBQUMsT0FBTyxDQUFDLEdBQUcsR0FBRyxFQUFFO0tBQzNFLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tICdAYXdzLWFtcGxpZnkvY2xpLWNvcmUnO1xuaW1wb3J0IHsgQW1wbGlmeVVzZXJFcnJvciB9IGZyb20gJ0Bhd3MtYW1wbGlmeS9wbGF0Zm9ybS1jb3JlJztcbmltcG9ydCB7IEVPTCB9IGZyb20gJ29zJztcblxuY29uc3QgZXhwZWN0ZWRDb21tYW5kTmFtZSA9ICdhbXB4JztcblxuLyoqXG4gKiBWZXJpZnkgdGhhdCB0aGUgY29tbWFuZCBuYW1lIGlzIGBhbXB4YC5cbiAqIEluIHRoZSBuZXh0IE1WLCB3ZSBzaG91bGQgcmVtb3ZlIHRoZSBcImFtcGxpZnlcIiBiaW4gZW50cnkgZW50aXJlbHkgYW5kIHRoZW4gdGhpcyB2YWxpZGF0aW9uIHdpbGwgbm8gbG9uZ2VyIGJlIG5lZWRlZFxuICovXG5leHBvcnQgY29uc3QgdmVyaWZ5Q29tbWFuZE5hbWUgPSAoKSA9PiB7XG4gIGNvbnN0IGNvbW1hbmROYW1lID0gcGF0aC5wYXJzZShwcm9jZXNzLmFyZ3ZbMV0pLm5hbWU7XG4gIGlmIChjb21tYW5kTmFtZSA9PT0gZXhwZWN0ZWRDb21tYW5kTmFtZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgY29tbWFuZCA9IHByb2Nlc3MuYXJndi5zbGljZSgyKS5qb2luKCcgJyk7XG4gIGlmIChjb21tYW5kLmxlbmd0aCA9PT0gMCkge1xuICAgIGNvbW1hbmQgPSAnPGNvbW1hbmQ+JztcbiAgfVxuICB0aHJvdyBuZXcgQW1wbGlmeVVzZXJFcnJvcignSW52YWxpZENvbW1hbmRFcnJvcicsIHtcbiAgICBtZXNzYWdlOiBgVGhlIEFtcGxpZnkgR2VuIDIgQ0xJIGhhcyBiZWVuIHJlbmFtZWQgdG8gJHtmb3JtYXQuY29tbWFuZChcbiAgICAgIGV4cGVjdGVkQ29tbWFuZE5hbWUsXG4gICAgKX1gLFxuICAgIHJlc29sdXRpb246IGBSZXJ1biB1c2luZyB0aGUgJHtmb3JtYXQuY29tbWFuZChcbiAgICAgIGV4cGVjdGVkQ29tbWFuZE5hbWUsXG4gICAgKX0gY29tbWFuZCBuYW1lOiR7RU9MfSR7RU9MfSR7Zm9ybWF0Lm5vcm1hbGl6ZUFtcHhDb21tYW5kKGNvbW1hbmQpfSR7RU9MfWAsXG4gIH0pO1xufTtcbiJdfQ==