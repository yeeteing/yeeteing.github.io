"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getUrl = void 0;
const node_url_1 = __importDefault(require("node:url"));
let cachedUrl;
const prodUrl = `https://telemetry.cli.amplify.aws/metrics`;
/**
 *  Telemetry data tracking service URL
 */
const getUrl = () => {
    if (!cachedUrl) {
        cachedUrl = getParsedUrl();
    }
    return cachedUrl;
};
exports.getUrl = getUrl;
const getParsedUrl = () => {
    return node_url_1.default.parse(process.env.AMPLIFY_BACKEND_TELEMETRY_TRACKING_ENDPOINT || prodUrl);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0X3RlbGVtZXRyeV91cmwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdGVsZW1ldHJ5L2dldF90ZWxlbWV0cnlfdXJsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLHdEQUFtRDtBQUVuRCxJQUFJLFNBQTZCLENBQUM7QUFFbEMsTUFBTSxPQUFPLEdBQUcsMkNBQTJDLENBQUM7QUFFNUQ7O0dBRUc7QUFDSSxNQUFNLE1BQU0sR0FBRyxHQUF1QixFQUFFO0lBQzdDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNmLFNBQVMsR0FBRyxZQUFZLEVBQUUsQ0FBQztJQUM3QixDQUFDO0lBRUQsT0FBTyxTQUFTLENBQUM7QUFDbkIsQ0FBQyxDQUFDO0FBTlcsUUFBQSxNQUFNLFVBTWpCO0FBRUYsTUFBTSxZQUFZLEdBQUcsR0FBdUIsRUFBRTtJQUM1QyxPQUFPLGtCQUFHLENBQUMsS0FBSyxDQUNkLE9BQU8sQ0FBQyxHQUFHLENBQUMsMkNBQTJDLElBQUksT0FBTyxDQUNuRSxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHVybCwgeyBVcmxXaXRoU3RyaW5nUXVlcnkgfSBmcm9tICdub2RlOnVybCc7XG5cbmxldCBjYWNoZWRVcmw6IFVybFdpdGhTdHJpbmdRdWVyeTtcblxuY29uc3QgcHJvZFVybCA9IGBodHRwczovL3RlbGVtZXRyeS5jbGkuYW1wbGlmeS5hd3MvbWV0cmljc2A7XG5cbi8qKlxuICogIFRlbGVtZXRyeSBkYXRhIHRyYWNraW5nIHNlcnZpY2UgVVJMXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRVcmwgPSAoKTogVXJsV2l0aFN0cmluZ1F1ZXJ5ID0+IHtcbiAgaWYgKCFjYWNoZWRVcmwpIHtcbiAgICBjYWNoZWRVcmwgPSBnZXRQYXJzZWRVcmwoKTtcbiAgfVxuXG4gIHJldHVybiBjYWNoZWRVcmw7XG59O1xuXG5jb25zdCBnZXRQYXJzZWRVcmwgPSAoKTogVXJsV2l0aFN0cmluZ1F1ZXJ5ID0+IHtcbiAgcmV0dXJuIHVybC5wYXJzZShcbiAgICBwcm9jZXNzLmVudi5BTVBMSUZZX0JBQ0tFTkRfVEVMRU1FVFJZX1RSQUNLSU5HX0VORFBPSU5UIHx8IHByb2RVcmwsXG4gICk7XG59O1xuIl19